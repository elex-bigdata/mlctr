sudo yum install memcached
memcached -d -m 256 -u hadoop -l 10.1.20.242 -p 11210 -c 10 -t 4 -P /tmp/memcached0.pid
memcached -d -m 256 -u hadoop -l 10.1.20.242 -p 11211 -c 10 -t 4 -P /tmp/memcached1.pid
-d 后台运行
-c 连接数
-t 线程数
printf "set chinatree 0 0 6\r\n123456\r\n" | nc 10.1.20.242 11210
printf "get chinatree\r\n" | nc 10.1.20.242 11210



yum install reddis

create 'ssp_idx_mapping',{NAME => 'idx', VERSIONS => 1, TTL => 172800, IN_MEMORY => true},{NUMREGIONS => 5,SPLITALGO =>'UniformSplit'}

create 'ssp_idx_mapping',{NAME => 'idx', VERSIONS => 1, TTL => 108000}

truncate 'ssp_idx_mapping'


https://github.com/elex-bigdata/mlctr.git

java -cp .:/home/hadoop/git_project_home/mlctr/target/mlctr-0.0.1-SNAPSHOT.jar com.elex.ssp.mlctr.idx.PrepareForIndex
报错：如果mr执行成功，但报FAILED: Execution Error, return code 1 from org.apache.hadoop.hive.ql.exec.MoveTask
原因：导出目的地权限问题
解决：chmod -R 777 /home/hadoop/wuzhongju/ctr/data


java -cp .:/usr/lib/hadoop-hdfs/*:/home/hadoop/git_project_home/mlctr/target/mlctr-0.0.1-SNAPSHOT.jar com.elex.ssp.mlctr.idx.FeatureValueEncoder
报错：java.io.IOException: No FileSystem for scheme: hdfs
解决：cp加上/usr/lib/hadoop-hdfs/*

java -cp .:/home/hadoop/git_project_home/mlctr/target/mlctr-0.0.1-SNAPSHOT.jar com.elex.ssp.mlctr.idx.IndexLoader

java -cp .:/home/hadoop/git_project_home/mlctr/target/mlctr-0.0.1-SNAPSHOT.jar com.elex.ssp.mlctr.vector.UserWordFeature

hadoop jar /home/hadoop/git_project_home/mlctr/target/mlctr-0.0.1-SNAPSHOT.jar com.elex.ssp.mlctr.vector.FeatureVectorizer train skip 20

hadoop jar /home/hadoop/git_project_home/mlctr/target/mlctr-0.0.1-SNAPSHOT.jar com.elex.ssp.mlctr.vector.FeatureVectorizer test skip 20


hadoop fs -getmerge /ssp/mlctr/test/output/part-r-* test_id.txt

hadoop fs -getmerge /ssp/mlctr/test/output/plain* test_plain.txt

hadoop fs -getmerge /ssp/mlctr/train/output/part-r-* train_id.txt


ln -s /data1/ssp/mlctr/ ssp

java -cp .:/home/hadoop/git_project_home/mlctr/target/mlctr-0.0.1-SNAPSHOT.jar com.elex.ssp.mlctr.liblinear.RandomSample 0.5 /data1/ssp/mlctr/exp1/train_id.txt /data1/ssp/mlctr/exp1/train_sample.txt  

cat user.idx | cut -c 3 | sort | uniq -c | sort -nr

./liblinear_modified/train -s 6 /data1/ssp/mlctr/exp5/train_id.txt model/exp5.model >> train_exp5.log 2>&1 &

./liblinear_modified/predict -b 1 /data1/ssp/mlctr/exp5/test_id.txt model/exp5.model output/exp5.out

cat output/exp5.out | python ./liblinear_modified/calauc.py

jar -uvf mlctr-0.0.1-SNAPSHOT.jar conf.properties 

cat train_id.txt | awk 'BEGIN {i=0;c=0;t=0} {i=i+$1;c=c+$2;t=t+1} END {print i,c,t}'

cat test_id.txt | awk '{if($2>0) printf "+1 "; else printf "-1 "; for(i=3;i<=NF;i++) printf $i" ";print "\r"}' >> change_test.txt

./liblinear-1.96/train -s 6 /data1/ssp/mlctr/exp5/change_test.txt model/exp5_change.model >> train_exp5.log 2>&1 &

#centos 安装numpy,scipy
sudo yum -y install numpy scipy 

#安装pip
wget https://bootstrap.pypa.io/get-pip.py
sudo python get-pip.py
#安装scikit-learning
sudo pip install -U scikit-learn





